<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Quick Start - CakePHP Api Plugin</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="CakePHP Api Plugin">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="CakePHP Api Plugin">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../None">
    <link rel="icon" type="image/x-icon" href="../None">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-54f87043f3.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-light-blue palette-accent-light-blue">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Quick Start
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          CakePHP Api Plugin
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Installation" href="../installation/">
      Installation
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="Quick Start" href="./">
      Quick Start
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Routing" href="#routing">
                Routing
              </a>
            </li>
          
            <li class="anchor">
              <a title="ApiBuilder Component" href="#apibuilder-component">
                ApiBuilder Component
              </a>
            </li>
          
            <li class="anchor">
              <a title="Transformers" href="#transformers">
                Transformers
              </a>
            </li>
          
            <li class="anchor">
              <a title="Serializers" href="#serializers">
                Serializers
              </a>
            </li>
          
            <li class="anchor">
              <a title="Result" href="#result">
                Result
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="Actions" href="../actions/">
      Actions
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Events" href="../events/">
      Events
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="quick-start">Quick Start</h1>
<p>In this section we will show a quick example of the use of the plugin.</p>
<p>After <a href="../installation/">installation</a>, you are ready to create your API endpoints.</p>
<h2 id="routing">Routing</h2>
<p>Add the following to your <code>config/routes.php</code> to enable RESTful routing for your API:</p>
<div class="code"><pre><span></span><span class="x">Router::scope(&#39;/&#39;, function (RouteBuilder </span><span class="p">$</span><span class="nv">routes</span><span class="x">) </span><span class="err">{</span><span class="x"></span>
<span class="x">    </span><span class="p">$</span><span class="nv">routes</span><span class="x">-&gt;extensions([&#39;json&#39;]);</span>
<span class="x">    </span><span class="p">$</span><span class="nv">routes</span><span class="x">-&gt;resources(&#39;blogs&#39;);</span>
<span class="x">});</span>
</pre></div>


<h2 id="apibuilder-component">ApiBuilder Component</h2>
<p>To get started you need to load the <code>ApiBuilder</code> component:</p>
<div class="code"><pre><span></span><span class="nt">class</span> <span class="nt">BlogsController</span> <span class="nt">extends</span> <span class="nt">AppController</span>
<span class="p">{</span>
    <span class="n">use</span> <span class="n">Api</span><span class="err">\</span><span class="n">Controller</span><span class="err">\</span><span class="n">ApiControllerTrait</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">function</span> <span class="n">initialize</span><span class="p">()</span>
    <span class="err">{</span>
        <span class="n">parent</span><span class="o">::</span><span class="n">initialize</span><span class="p">();</span>

        <span class="err">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="n">loadComponent</span><span class="p">(</span><span class="s1">&#39;Api.ApiBuilder&#39;</span><span class="o">,</span> <span class="cp">[</span>
            <span class="s1">&#39;actions&#39;</span> <span class="o">=&gt;</span> <span class="err">[</span>
                <span class="s1">&#39;index&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Api.Index&#39;</span><span class="p">,</span>
                <span class="s1">&#39;view&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Api.View&#39;</span><span class="p">,</span>
                <span class="s1">&#39;add&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Api.Add&#39;</span>
                <span class="s1">&#39;edit&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Api.Edit&#39;</span><span class="p">,</span>
                <span class="s1">&#39;delete&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Api.Delete&#39;</span><span class="p">,</span>
            <span class="cp">]</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="err">}</span>
</pre></div>


<p>The following settings can be passed through the component:</p>
<ul>
<li><code>actions</code> - Array of actions with its mappings. So when the <code>index</code> action is requested, the <code>IndexAction</code> of the API plugin is used.</li>
<li><code>serializer</code> - Namespace of the serializer to use. Default <code>League\Fractal\Serializer\DataArraySerializer</code>.</li>
<li><code>paginator</code> - Paginator to use (for Fractal). Default <code>Api\Pagination\CakePaginatorAdapter</code>.</li>
<li><code>listeners</code> - Array of listeners to implement.</li>
</ul>
<h2 id="transformers">Transformers</h2>
<p>Transformers are classes, which are responsible for taking one instance of the resource data and converting it to a basic array. Transformers are implemented by <a href="http://fractal.thephpleague.com/transformers/">Fractal</a>.</p>
<p>If you want a hand-on, we recommend to use this query first to build up your <code>blogs</code> table...:</p>
<div class="code"><pre><span></span>CREATE TABLE `blogs` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(255) NULL DEFAULT NULL,
    `body` TEXT NULL,
    `author` VARCHAR(255) NULL DEFAULT NULL,
    `created` DATETIME NULL DEFAULT NULL,
    `modified` DATETIME NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
);
</pre></div>


<p>... And quickely build your model:</p>
<div class="code"><pre><span></span>$ bin/cake bake model Blogs
</pre></div>


<p>You can easily create your first transformer with <code>cake bake</code>:</p>
<div class="code"><pre><span></span>$ bin/cake bake transformer Blog
</pre></div>


<p>You can see that the <code>BlogTransformer</code> class has the following method:</p>
<div class="code"><pre><span></span><span class="x">namespace App\Transformer;</span>

<span class="x">class BlogTransformer extends Transformer</span>
<span class="err">{</span><span class="x"></span>

<span class="x">    /**</span>
<span class="x">     * Transformer</span>
<span class="x">     *</span>
<span class="x">     * @param Blog </span><span class="p">$</span><span class="nv">entity</span><span class="x"> Item.</span>
<span class="x">     * @return array</span>
<span class="x">     */</span>
<span class="x">    public function transform(Blog </span><span class="p">$</span><span class="nv">entity</span><span class="x">)</span>
<span class="x">    </span><span class="err">{</span><span class="x"></span>
<span class="x">        return[</span>
<span class="x">            &#39;id&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;id&#39;),</span>
<span class="x">            &#39;name&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;name&#39;),</span>
<span class="x">            &#39;body&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;body&#39;),</span>
<span class="x">            &#39;category_id&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;category_id&#39;),</span>
<span class="x">            &#39;created&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;created&#39;),</span>
<span class="x">            &#39;modified&#39; =&gt; </span><span class="p">$</span><span class="nv">entity</span><span class="x">-&gt;get(&#39;modified&#39;),</span>
<span class="x">        ];</span>
<span class="x">    }</span>

<span class="x">}</span>
</pre></div>


<p>The good thing about Transformers is that they are the “barrier” between source data and output. That means that schema changes do not affect users.
You are free to choose the structure of the result of your <code>transform</code> method.</p>
<blockquote>
<p>Note: Want to read more about Transformers? <a href="http://fractal.thephpleague.com/transformers/">Check out the possibilities here!</a></p>
</blockquote>
<h2 id="serializers">Serializers</h2>
<p>Serializers are another great thing of <a href="http://fractal.thephpleague.com/transformers/">Fractal</a>. They structure your transformed data in certain ways.
There are 3 serializers available:</p>
<ul>
<li><code>DataArraySerializer</code> - The default serializer. It adds a <code>data</code> namespace to the output:</li>
</ul>
<div class="code"><pre><span></span>// Item
[
    &#39;data&#39; =&gt; [
        &#39;foo&#39; =&gt; &#39;bar&#39;
    ],
];

// Collection
[
    &#39;data&#39; =&gt; [
        [
            &#39;foo&#39; =&gt; &#39;bar&#39;
        ]
    ],
];
</pre></div>


<ul>
<li><code>ArraySerializer</code> - Sometimes people want to remove that 'data' namespace for items, which can be done by this serializer. 
This is mostly the same, other than that namespace for items. Collections keep the 'data' namespace to avoid confusing JSON when meta data is added.</li>
</ul>
<div class="code"><pre><span></span>// Item
[
    &#39;foo&#39; =&gt; &#39;bar&#39;
];

// Collection
[
    &#39;data&#39; =&gt; [
        &#39;foo&#39; =&gt; &#39;bar&#39;
    ]
];
</pre></div>


<ul>
<li><code>JsonApiSerializer</code> - This is a representation of the <a href="http://jsonapi.org/">JSON-API standard (v1.0)</a> which is very great. Output looks like:</li>
</ul>
<div class="code"><pre><span></span>// Item
[
    &#39;data&#39; =&gt; [
        &#39;type&#39; =&gt; &#39;books&#39;,
        &#39;id&#39; =&gt; 1,
        &#39;attributes&#39; =&gt; [
            &#39;foo&#39; =&gt; &#39;bar&#39;
        ],
    ],
];

// Collection
[
    &#39;data&#39; =&gt; [
        [
            &#39;type&#39; =&gt; &#39;books&#39;,
            &#39;id&#39; =&gt; 1,
            &#39;attributes&#39; =&gt; [
                &#39;foo&#39; =&gt; &#39;bar&#39;
            ],
        ]
    ],
];
</pre></div>


<p>You can set the serializer you want via the <code>ApiBuilder</code>:</p>
<div class="code"><pre><span></span><span class="p">$</span><span class="nv">this</span><span class="x">-&gt;loadComponent(&#39;Api.ApiBuilder&#39;, [</span>
<span class="x">    &#39;serializer&#39; =&gt; League\Fractal\Serializer\JsonApiSerializer::class</span>
<span class="x">]);</span>
</pre></div>


<blockquote>
<p>Note: Want to read more about Serializers? <a href="http://fractal.thephpleague.com/serializers/">Check out the possibilities here!</a></p>
</blockquote>
<h2 id="result">Result</h2>
<p>You've added the <code>ApiBuilder</code> component to the controller, you've created the transformer, and chose your serializer. You are ready to go!</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../installation/" title="Installation">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Installation
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../actions/" title="Actions">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Actions
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>